{"version":3,"sources":["../../../src/datasource/directives/ncSpinner.directive.js"],"names":["angular","imagesURL","directivesModule","PRIVATE_PROPERTIES","showTimer","Symbol","spinnerState","timeout","NC_SPINNER_CONTROLLER_DI","NcSpinnerController","$scope","$timeout","$watch","showTrigger","showSpinner","hideSpinner","spinnerOnChange","state","delay","cancel","spinnerDelay","isNumber","$inject","NcSpinner","restrict","scope","spinnerShowTrigger","template","controller","controllerAs","bindToController","module","directive"],"mappings":"4XAQOA,O,qCACEC,S,SAAAA,S,CAAWC,gB,SAAAA,gB,ugBAGlBC,kB,CAAqB,CACnBC,UAAWC,OAAO,WAAP,CADQ,CAEnBC,aAAcD,OAAO,cAAP,CAFK,CAGnBE,QAASF,OAAO,SAAP,CAHU,C,CAKrBG,wB,uBAEIC,mB,YAEJ,6BAAYC,CAAZ,CAAoBC,CAApB,CAA8B,0DAE5B,KAAKR,mBAAmBC,SAAxB,EAAqC,IAFT,CAG5B,KAAKD,mBAAmBG,YAAxB,IAH4B,CAI5B,KAAKH,mBAAmBI,OAAxB,EAAmCI,CAJP,CAM5BD,EAAOE,MAAP,CAAc,kCAAd,CAAkD,SAACC,CAAD,CAAiB,CAC7DA,CAD6D,CAE/D,MAAKC,WAAL,EAF+D,CAI/D,MAAKC,WAAL,EAEH,CAND,CAQD,C,4EAEa,iBACNR,EAAU,KAAKJ,mBAAmBI,OAAxB,CADJ,CAG+B,IAAvC,QAAKJ,mBAAmBC,SAAxB,CAHQ,GAIV,KAAKD,mBAAmBC,SAAxB,EAAqCG,EAAQ,UAAM,CACjD,OAAKJ,mBAAmBG,YAAxB,IADiD,CAEjD,OAAKH,mBAAmBC,SAAxB,EAAqC,IAFY,CAGjD,OAAKY,eAAL,CAAqB,CAAEC,QAAF,CAArB,CACD,CAJoC,CAIlC,KAAKC,KAJ6B,CAJ3B,CAUb,C,qCAEa,CACZ,GACEd,GAAY,KAAKD,mBAAmBC,SAAxB,CADd,CAEEG,EAAU,KAAKJ,mBAAmBI,OAAxB,CAFZ,CAIiB,IAAb,GALQ,GAMVA,EAAQY,MAAR,CAAef,CAAf,CANU,CAOV,KAAKD,mBAAmBC,SAAxB,EAAqC,IAP3B,EAUZ,KAAKD,mBAAmBG,YAAxB,IAVY,CAWZ,KAAKU,eAAL,CAAqB,CAAEC,QAAF,CAArB,CACD,C,6BAEW,CACV,GAAMC,IAAe,KAAKE,YAA1B,CACA,MAAOpB,SAAQqB,QAAR,CAAiBH,CAAjB,EAA0BA,CAA1B,CAAkC,GAC1C,C,oCAEkB,CACjB,MAAO,MAAKf,mBAAmBG,YAAxB,CACR,C,2BAIHG,oBAAoBa,OAApB,CAA8Bd,wB,CAExBe,S,CAEJ,oBAAc,iCAEZ,KAAKC,QAAL,CAAgB,GAFJ,CAIZ,KAAKC,KAAL,CAAa,CACXC,mBAAoB,GADT,CAEXN,aAAc,GAFH,CAGXJ,gBAAiB,GAHN,CAJD,CAUZ,KAAKW,QAAL,6FAEe1B,SAFf,qCAVY,CAgBZ,KAAK2B,UAAL,CAAkBnB,mBAhBN,CAiBZ,KAAKoB,YAAL,CAAoB,eAjBR,CAkBZ,KAAKC,gBAAL,GAED,C,CAIH9B,QACG+B,MADH,CACU7B,gBADV,EAEK8B,SAFL,CAEe,WAFf,CAE4B,iBAAM,IAAIT,UAAV,CAF5B,C","file":"ncSpinner.directive.js","sourcesContent":["/**\r\n * @license\r\n * Copyright AdRem Software. All Rights Reserved.\r\n *\r\n * Use of this source code is governed by an Apache License, Version 2.0 that can be\r\n * found in the LICENSE file.\r\n */\r\n\r\nimport angular from 'angular';\r\nimport { imagesURL, directivesModule } from '../common';\r\n\r\nconst\r\n  PRIVATE_PROPERTIES = {\r\n    showTimer: Symbol('showTimer'),\r\n    spinnerState: Symbol('spinnerState'),\r\n    timeout: Symbol('timeout')\r\n  },\r\n  NC_SPINNER_CONTROLLER_DI = ['$scope', '$timeout'];\r\n\r\nclass NcSpinnerController {\r\n\r\n  constructor($scope, $timeout) {\r\n\r\n    this[PRIVATE_PROPERTIES.showTimer] = null;\r\n    this[PRIVATE_PROPERTIES.spinnerState] = false;\r\n    this[PRIVATE_PROPERTIES.timeout] = $timeout;\r\n\r\n    $scope.$watch('ncSpinnerCtrl.spinnerShowTrigger', (showTrigger) => {\r\n      if (showTrigger) {\r\n        this.showSpinner();\r\n      } else {\r\n        this.hideSpinner();\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  showSpinner() {\r\n    const timeout = this[PRIVATE_PROPERTIES.timeout];\r\n\r\n    if (this[PRIVATE_PROPERTIES.showTimer] === null) {\r\n      this[PRIVATE_PROPERTIES.showTimer] = timeout(() => {\r\n        this[PRIVATE_PROPERTIES.spinnerState] = true;\r\n        this[PRIVATE_PROPERTIES.showTimer] = null;\r\n        this.spinnerOnChange({ state: true });\r\n      }, this.delay);\r\n    }\r\n  }\r\n\r\n  hideSpinner() {\r\n    const\r\n      showTimer = this[PRIVATE_PROPERTIES.showTimer],\r\n      timeout = this[PRIVATE_PROPERTIES.timeout];\r\n\r\n    if (showTimer != null) {\r\n      timeout.cancel(showTimer);\r\n      this[PRIVATE_PROPERTIES.showTimer] = null;\r\n    }\r\n\r\n    this[PRIVATE_PROPERTIES.spinnerState] = false;\r\n    this.spinnerOnChange({ state: false });\r\n  }\r\n\r\n  get delay() {\r\n    const delay = Number(this.spinnerDelay);\r\n    return angular.isNumber(delay) ? delay : 200;\r\n  }\r\n\r\n  get spinnerState() {\r\n    return this[PRIVATE_PROPERTIES.spinnerState];\r\n  }\r\n\r\n}\r\n\r\nNcSpinnerController.$inject = NC_SPINNER_CONTROLLER_DI;\r\n\r\nclass NcSpinner {\r\n\r\n  constructor() {\r\n\r\n    this.restrict = 'E';\r\n\r\n    this.scope = {\r\n      spinnerShowTrigger: '<',\r\n      spinnerDelay: '@',\r\n      spinnerOnChange: '&'\r\n    };\r\n\r\n    this.template = `\r\n      <div class=\"gf-form-label\" ng-if=\"ncSpinnerCtrl.spinnerState\">\r\n        <img src=${imagesURL}load_big.gif/>\r\n      </div>\r\n    `;\r\n\r\n    this.controller = NcSpinnerController;\r\n    this.controllerAs = 'ncSpinnerCtrl';\r\n    this.bindToController = true;\r\n\r\n  }\r\n\r\n}\r\n\r\nangular\r\n  .module(directivesModule)\r\n    .directive('ncSpinner', () => new NcSpinner());\r\n"]}