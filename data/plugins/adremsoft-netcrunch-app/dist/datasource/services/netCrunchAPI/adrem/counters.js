'use strict';System.register([],function(_export){'use strict';var C_PERSEC,CNT_SEPARATOR,CNT_SRC_SEPARATOR,MIB_CNT_SRC_ID,XML_CNT_SRC_ID,OVERALL_TOTAL,OVERALL_MAXIMUM,OVERALL_MINIMUM,OVERALL_AVERAGE,OVERALL_COUNT,knownMSCounters,NETCRUNCH_COUNTER_CONST,NETCRUNCH_COUNTER_TYPES;function NetCrunchCounters(a,b){var _this=this;function d(V){return 0<=V.indexOf(C_PERSEC)&&(V=V.replace(C_PERSEC,'')),null!=V.match(/^((([0-9]+)\.)+[0-9]+)$/)}function g(V){return V===MIB_CNT_SRC_ID?U.CNT_TYPE.cstMIB:U.CNT_TYPE.cstXML}function h(V){var W=void 0;return W=U.CNT_TYPE.cstSimple,0<V.indexOf(CNT_SRC_SEPARATOR)&&(W=g(V.split(CNT_SRC_SEPARATOR)[0])),W}function j(V){var W=V;return 0<V.indexOf(CNT_SRC_SEPARATOR)&&(W=V.split(CNT_SRC_SEPARATOR)[1]),W}function l(V){var W=void 0,X=void 0,Y=void 0;return 0>V.indexOf(CNT_SRC_SEPARATOR)?(W=U.CNT_TYPE.cstXML,X=V):(Y=V.split(CNT_SRC_SEPARATOR),W=g(Y[0]),X=Y[1]),{type:W,value:X}}function n(V){var W={},X=U.SNMP_FUNC.scfUnknown;return W[OVERALL_TOTAL]=U.SNMP_FUNC.scfSum,W[OVERALL_AVERAGE]=U.SNMP_FUNC.scfAvg,W[OVERALL_MAXIMUM]=U.SNMP_FUNC.scfMax,W[OVERALL_MINIMUM]=U.SNMP_FUNC.scfMin,W[OVERALL_COUNT]=U.SNMP_FUNC.scfCount,null!=W[V]&&(X=W[V]),X}function o(V){// eslint-disable-next-line
return y(V)}function q(V){var W=o(V),X=W.obj,Y=W.cnt,Z=W.inst,$=void 0,_=0<=Y.indexOf(C_PERSEC),//eslint-disable-line
aa=void 0;return!0==_&&(Y=Y.replace(C_PERSEC,'')),''===Z||'-'===Z?(aa=Y.match(/(.*)\.([0-9]+)$/),1<aa.length&&(Y=aa[1],Z=aa[2]),$='0'===Z?U.SNMP_INSTANCE_TYPE.sitNone:U.SNMP_INSTANCE_TYPE.sitByIndex):'#'===Z.charAt(0)?(Z=Z.substr(1),$=U.SNMP_INSTANCE_TYPE.sitByIndex):'_'===Z.charAt(0)&&n(Z)!==U.SNMP_FUNC.scfUnknown?$=U.SNMP_INSTANCE_TYPE.sitComputable:$=U.SNMP_INSTANCE_TYPE.sitByLookup,{objOID:Y,instOID:X,inst:Z,isPerSec:_,type:$}}function r(V,W){var X=o(V),Y=X.inst,Z=void 0;return!0===W&&(Z=U.SNMP_INSTANCE_TYPE.sitByLookup,''===Y?''===Y||'-'===Y?Z=U.SNMP_INSTANCE_TYPE.sitNone:Z=U.SNMP_INSTANCE_TYPE.sitByLookup:'#'===Y.charAt(0)?(Y=Y.substr(1),Z=U.SNMP_INSTANCE_TYPE.sitByIndex):'_'===Y.charAt(0)&&(Z=U.SNMP_INSTANCE_TYPE.sitComputable),X.inst=Y,X.type=Z),X}function u(V,W,X){var Y=!1;return new Promise(function(Z){null==W[V]?(W[V]=V,Y=!0):W[V]===V&&(Y=!0),!0==Y?X(V,function($){W[V]=$,Z($)}):Z(W[V])})}function w(V){return u(V,O,b.ncSrv.IRemoteSNMPMIBData.GetShortOIDPath)}function x(V){return u(V,P,b.ncSrv.IRemoteSNMPMIBData.GetFullOIDPath)}function y(V){var W=V.split(CNT_SEPARATOR),X={};return X.obj=W[0],X.cnt=1<W.length?W[1]:'',X.inst=3===W.length?W[2]:3<W.length?W.slice(2).join(CNT_SEPARATOR):'',X}function C(V,W){var X=V.obj,Y=void 0;return W=null==W||W,''!==V.inst&&null!=V.inst&&(X=V.obj+'('+V.inst+')'),''!==V.cnt&&null!=V.cnt&&(!W&&V.perSec?(Y=V.cnt.indexOf(C_PERSEC),X=X+'\\'+V.cnt.substr(0,Y)):X=X+'\\'+V.cnt),X}function D(V){var W=y(V);return C(W,!0)}function E(V,W,X){return''===X?V+CNT_SEPARATOR+W:V+CNT_SEPARATOR+W+CNT_SEPARATOR+X}function F(V,W,X){var Y=l(V),Z=void 0,$=Promise.resolve(null);if(Y.type===U.CNT_TYPE.cstXML)$=Promise.resolve(D(Y.value));else if(Y.type===U.CNT_TYPE.cstMIB)return Z=q(V),$=!0===W?w(Z.objOID):x(Z.objOID),$.then(function(_){return(null==_||''===_)&&(_=Z.objOID),'0'===Z.inst&&(Z.inst=''),_=D(E(_,'',Z.inst)),!0===X&&!0===Z.isPerSec&&(_+=C_PERSEC),_});return $}function H(V){return 0<=knownMSCounters.indexOf(V.toLowerCase())}/**
   * isMillisecondsCounter(
   * @param counter
   * @returns {boolean}
   */function I(V){var W=y(V);return W.cnt===R||W.cnt===Q||0<=W.cnt.toUpperCase().indexOf('MILLISECOND')||H(W.cnt)}function J(V,W){return 0<=V.indexOf(W)}/**
   * isBytesCounter
   * @param displayName
   * @returns {null|''|'M'|'K'}
   */function K(V){var W=V.toLowerCase(),X='';return J(W,S.metrics.bytes)||J(W,S.metrics.memory)||J(W,'octet')?(J(W,S.metrics.mbytes)||J(W,'mega')?X='M':(J(W,S.metrics.kbytes)||J(W,'kilo'))&&(X='K'),X):null}function L(V,W,X){var Y=3<arguments.length&&void 0!==arguments[3]?arguments[3]:['K','M','G'],Z='';return V>=1*W&&V<W*X?(V/=W,Z=Y[0]):V>=W*X&&V<W*X*X?(V=V/W/X,Z=Y[1]):V>=W*X*X&&(V=V/W/X/X,Z=Y[2]),{value:V,units:Z}}function M(V,W){return L(V,W,W)}function N(V){return L(V,1e3,60,['sec','min','hrs'])}var O=Object.create(null),P=Object.create(null),Q='Check Time',R='Round Trip Time',S=Object.create(null),T=NETCRUNCH_COUNTER_TYPES,U=NETCRUNCH_COUNTER_CONST;return{unitsToMetric:function(V,W,X){if('bytestobps'===V)return'bps';return'percentage'===V?'%':'bytesps'===V?'Bps':'bytes'===V?'bytes':_this.getMetric(W,X)},/**
     * Get Metric for Counter
     * @param counterPath
     * @param displayName
     * @returns {*}
     */getMetric:function(V,W){var X=void 0;if(J(W,'%'))return T.percentage;return I(V)?T.milliseconds:(X=K(W),null===X?'':(''!==X&&(X='\'#'+X),J(W,C_PERSEC)||J(W,'per sec.')?T.bytesBitsPS+X:T.bytes+X))},getDisplayValue:function(V,W){var X=W.split('#'),Y=X[0],Z=1<X.length?X[1]:'',$=Y===T.bytesBitsPS,_=Y===T.bytes||$||Y===T.bytesBps,aa=Y===T.milliseconds,ca=void 0;return null==V||isNaN(V)?{value:V,units:''}:($&&(V*=8),''!==Z)?{value:Math.round(100*V)/100,units:Z+(_?'B':'')}:(_?(ca=M(V,1024),ca.units+=Y===T.bytes?'B':Y):''===Y?ca=M(V,1e3):aa?(ca=N(V),''===ca.units&&(ca.units=T.milliseconds)):ca={value:V,units:Y},{value:ca.value,units:ca.units})},isOid:d,isMIBCnt:function(V,W){return!0===d(V)&&(''===W||!0===d(W))||''===V&&!0===d(W)},counterPathObject:function(V,W){if(W!==U.CNT_TYPE.cstSimple){if(W===U.CNT_TYPE.cstXML)return XML_CNT_SRC_ID+CNT_SRC_SEPARATOR+V;if(W===U.CNT_TYPE.cstMIB)return MIB_CNT_SRC_ID+CNT_SRC_SEPARATOR+V}return V},stringToCntType:g,getCounterPathType:h,removeCounterPathType:j,removePerSecond:function(V){return V.replace(C_PERSEC,'')},parseSNMPPath:l,parseOIDPath:q,parseXMLPath:r,parseCounterPath:function(V){var W=h(V),X=void 0;return W===U.CNT_TYPE.cstXML?X=r(V,!0):W===U.CNT_TYPE.cstMIB?(X=q(j(V)),X.obj=X.objOID,X.cnt='',''===X.inst&&(X.inst=X.instOID)):W===U.CNT_TYPE.cstSimple&&(X=o(V)),X},getShortOidPath:w,getFullOidPath:x,decodePath:y,encodePath:function(V){var W=[V.obj,V.cnt];return''!==V.inst&&W.push(V.inst),W.join(CNT_SEPARATOR)},addInstance:function(V,W){return''===W?V:V+CNT_SEPARATOR+W},decodeDisplayPath:function(V){var W={obj:'',cnt:'',inst:''},X=V.indexOf(C_PERSEC),Y=0<=X,Z=void 0;return Y&&(V=V.substr(0,X)),[{fmt:/(.+)\((.+)\)\\(.+)/,parts:['obj','inst','cnt']},// obj(inst)\cnt
{fmt:/(.+)\((.+)\)/,parts:['obj','inst']},// obj(inst)
{fmt:/(.+)\\(.+)/,parts:['obj','cnt']// obj\cnt
}].some(function($){//eslint-disable-line
var _=V.match($.fmt);return null!=_&&($.parts.forEach(function(aa,ba){W[aa]=_[ba+1]}),!0)})||(W.obj=V),''===W.cnt&&''!==W.obj&&(W.obj.match('^[0-9\\.]+(\\.[0-9]+)$')?(W.cnt='',''!==W.inst&&(W.obj=W.obj+'.'+W.inst,W.inst='')):0<=W.obj.indexOf('.')?(Z=W.obj.split('.'),W.cnt=Z[1],W.obj=Z[0]):(W.cnt=W.obj,W.obj='')),W.perSec=Y,Y&&(W.cnt+=C_PERSEC),W},encodeDisplayPath:C,removePerSec:function(V){var W=V.indexOf(C_PERSEC);// todo: check if ix == displayName.length - C_PERSEC.length
return V.substr(0,W)},getSNMPDisplayPath:F,counterPathToDisplayStr:function(V,W,X){var Y=h(V);return Y===U.CNT_TYPE.cstXML||Y===U.CNT_TYPE.cstMIB?F(V,W,X):Promise.resolve(D(V))}}}return{setters:[],execute:function(){C_PERSEC='/sec';CNT_SEPARATOR='|';CNT_SRC_SEPARATOR='&';MIB_CNT_SRC_ID='MIB';XML_CNT_SRC_ID='XML';OVERALL_TOTAL='_Total';OVERALL_MAXIMUM='_Maximum';OVERALL_MINIMUM='_Minimum';OVERALL_AVERAGE='_Average';OVERALL_COUNT='_Count';knownMSCounters=['load time','check time','round trip time'];_export('NETCRUNCH_COUNTER_CONST',NETCRUNCH_COUNTER_CONST={CNT_TYPE:{cstXML:1,cstMIB:2,cstSimple:3},SNMP_INSTANCE_TYPE:{sitValue:1,sitNone:2,sitByIndex:3,sitByLookup:4,sitComputable:5},SNMP_FUNC:{scfUnknown:1,scfSum:2,scfMin:3,scfMax:4,scfAvg:5,scfCount:6}});_export('NETCRUNCH_COUNTER_TYPES',NETCRUNCH_COUNTER_TYPES={percentage:'%',milliseconds:'ms',bytesBitsPS:'bps',bytesBps:'Bps',bytes:'bytes'});_export('NETCRUNCH_COUNTER_CONST',NETCRUNCH_COUNTER_CONST);_export('NETCRUNCH_COUNTER_TYPES',NETCRUNCH_COUNTER_TYPES);_export('NetCrunchCounters',NetCrunchCounters)}}});
//# sourceMappingURL=counters.js.map
