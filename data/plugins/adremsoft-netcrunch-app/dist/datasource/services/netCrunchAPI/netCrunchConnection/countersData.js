'use strict';System.register(['../adrem/module','./sessionCache'],function(_export){'use strict';var NetCrunchCounters,NETCRUNCH_COUNTER_CONST,NetCrunchSessionCache;/**
 * @license
 * Copyright AdRem Software. All Rights Reserved.
 *
 * Use of this source code is governed by an Apache License, Version 2.0 that can be
 * found in the LICENSE file.
 *//* eslint-disable no-shadow, no-param-reassign, object-shorthand, func-names */function NetCrunchCountersData(a,b){function d(p,q){o.addToCache(j,p,q)}function e(p){return o.getFromCache(j,p)}function f(p,q){o.addToCache(k,p,q)}function g(p){return o.getFromCache(k,p)}function h(p){o.addToCache(l,l,p)}function i(){return o.getFromCache(l,l)}var j='counters',k='countersPath',l='monitors',m=new NetCrunchCounters(a,b),n=NETCRUNCH_COUNTER_CONST,o=new NetCrunchSessionCache;return o.addSection(j),o.addSection(k),o.addSection(l),{prepareCountersForMonitors:function(p){function r(y,z){return w.convertCounterPathToDisplay(y[1],z).then(function(A){// eslint-disable-line
return{name:y[1],displayName:A}})}function s(y,z){return y.displayName<z.displayName?-1:y.displayName>z.displayName?1:y.displayName===z.displayName?0:0}function t(y){return Object.keys(y).forEach(function(z){y[z].counters.sort(s)}),y}function u(y,z){return w.getMonitors(z).then(function(A){return Object.keys(y).forEach(function(B){null!=A[B]&&(y[B].name=A[B].counterGroup)}),y})}var q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,v=[],w=this,x=Object.create(null);return p.forEach(function(y){null==x[y[0]]&&(x[y[0]]=Object.create(null),x[y[0]].counters=[]),x[y[0]].counters.push(r(y,q))}),Object.keys(x).forEach(function(y){v.push(Promise.all(x[y].counters).then(function(z){x[y].counters=z}))}),Promise.all(v).then(function(){return x=t(x),u(x,q)})},getCounters:function(p){var q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,r=void 0;return r=q?e(p):null,null==r&&(r=new Promise(function(s){b.ncSrv.IRemoteTrendDB.GetCounters(p.toString(),function(t){t=t.map(function(u){return[u.id,u.path]}),s(t)})}),d(p,r)),r},convertCounterPathToDisplay:function(p){var q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,r=m.parseCounterPath(p),s=void 0,t=void 0;return t=q?g(p):null,null==t&&(!0===m.isMIBCnt(r.obj,r.cnt)?(s=m.counterPathObject(p,n.CNT_TYPE.cstMIB),t=m.counterPathToDisplayStr(s,!0,!0)):t=m.counterPathToDisplayStr(p,!0,!0),f(p,t)),t},getMonitors:function(){var p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,q=void 0;return q=p?i():null,null==q&&(q=new Promise(function(r){b.ncSrv.IMonitorsManager.GetMonitors(-1,function(s){var t=Object.create(null);s.forEach(function(u){t[u.id]=u}),r(t)})}),h(q)),q},getCountersForMonitors:function(p,q){var _this=this;function r(s){var t=[];return Object.keys(s).forEach(function(u){0<u&&(t=t.concat(s[u].counters))}),t}return this.getCounters(p,q).then(function(s){return _this.prepareCountersForMonitors(s,q)}).then(function(s){return s.table=r(s),s})},findCounterByName:function(p,q){var r=null;return p.table.some(function(s){return s.name===q&&(r=s,!0)}),r}}}return{setters:[function(_adremModule){NetCrunchCounters=_adremModule.NetCrunchCounters;NETCRUNCH_COUNTER_CONST=_adremModule.NETCRUNCH_COUNTER_CONST},function(_sessionCache){NetCrunchSessionCache=_sessionCache.NetCrunchSessionCache}],execute:function(){_export('NetCrunchCountersData',NetCrunchCountersData)}}});
//# sourceMappingURL=countersData.js.map
